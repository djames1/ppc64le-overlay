From ed1d0851209b2ba1eb0d8ac28b3b316f31dba665 Mon Sep 17 00:00:00 2001
From: Shawn Anastasio <shawnanastasio@yahoo.com>
Date: Fri, 21 Sep 2018 16:10:48 -0500
Subject: [PATCH] third_party/ffmpeg: Add pre-generated ppc64 configuration

---
 chromium/config/Chrome/linux/ppc64/config.h   | 11 +++++++++-
 .../Chrome/linux/ppc64/libavutil/ffversion.h  |  2 +-
 chromium/config/ChromeOS/linux/ppc64/config.h | 11 +++++++++-
 .../linux/ppc64/libavutil/ffversion.h         |  2 +-
 chromium/config/Chromium/linux/ppc64/config.h | 11 +++++++++-
 .../linux/ppc64/libavutil/ffversion.h         |  2 +-
 ffmpeg_generated.gni                          | 20 +++++++++++++++++++
 7 files changed, 53 insertions(+), 6 deletions(-)

diff --git a/chromium/config/Chrome/linux/ppc64/config.h b/chromium/config/Chrome/linux/ppc64/config.h
index 4c638112a3..a8ba5f8e04 100644
--- a/third_party/ffmpeg/chromium/config/Chrome/linux/ppc64/config.h
+++ b/third_party/ffmpeg/chromium/config/Chrome/linux/ppc64/config.h
@@ -417,6 +417,7 @@
 #define CONFIG_OPENSSL 0
 #define CONFIG_LIBTLS 0
 #define CONFIG_GMP 0
+#define CONFIG_LIBLENSFUN 0
 #define CONFIG_LIBOPENCORE_AMRNB 0
 #define CONFIG_LIBOPENCORE_AMRWB 0
 #define CONFIG_LIBVMAF 0
@@ -971,6 +972,7 @@
 #define CONFIG_ATRAC3AL_DECODER 0
 #define CONFIG_ATRAC3P_DECODER 0
 #define CONFIG_ATRAC3PAL_DECODER 0
+#define CONFIG_ATRAC9_DECODER 0
 #define CONFIG_BINKAUDIO_DCT_DECODER 0
 #define CONFIG_BINKAUDIO_RDFT_DECODER 0
 #define CONFIG_BMV_AUDIO_DECODER 0
@@ -1656,6 +1658,7 @@
 #define CONFIG_BLACKFRAME_FILTER 0
 #define CONFIG_BLEND_FILTER 0
 #define CONFIG_BOXBLUR_FILTER 0
+#define CONFIG_BOXBLUR_OPENCL_FILTER 0
 #define CONFIG_BWDIF_FILTER 0
 #define CONFIG_CHROMAKEY_FILTER 0
 #define CONFIG_CIESCOPE_FILTER 0
@@ -1724,6 +1727,7 @@
 #define CONFIG_GBLUR_FILTER 0
 #define CONFIG_GEQ_FILTER 0
 #define CONFIG_GRADFUN_FILTER 0
+#define CONFIG_GREYEDGE_FILTER 0
 #define CONFIG_HALDCLUT_FILTER 0
 #define CONFIG_HFLIP_FILTER 0
 #define CONFIG_HISTEQ_FILTER 0
@@ -1744,6 +1748,7 @@
 #define CONFIG_INTERLEAVE_FILTER 0
 #define CONFIG_KERNDEINT_FILTER 0
 #define CONFIG_LENSCORRECTION_FILTER 0
+#define CONFIG_LENSFUN_FILTER 0
 #define CONFIG_LIBVMAF_FILTER 0
 #define CONFIG_LIMITER_FILTER 0
 #define CONFIG_LOOP_FILTER 0
@@ -1789,6 +1794,7 @@
 #define CONFIG_PP7_FILTER 0
 #define CONFIG_PREMULTIPLY_FILTER 0
 #define CONFIG_PREWITT_FILTER 0
+#define CONFIG_PREWITT_OPENCL_FILTER 0
 #define CONFIG_PROCAMP_VAAPI_FILTER 0
 #define CONFIG_PROGRAM_OPENCL_FILTER 0
 #define CONFIG_PSEUDOCOLOR_FILTER 0
@@ -1805,6 +1811,7 @@
 #define CONFIG_REPEATFIELDS_FILTER 0
 #define CONFIG_REVERSE_FILTER 0
 #define CONFIG_ROBERTS_FILTER 0
+#define CONFIG_ROBERTS_OPENCL_FILTER 0
 #define CONFIG_ROTATE_FILTER 0
 #define CONFIG_SAB_FILTER 0
 #define CONFIG_SCALE_FILTER 0
@@ -1833,9 +1840,10 @@
 #define CONFIG_SIGNATURE_FILTER 0
 #define CONFIG_SMARTBLUR_FILTER 0
 #define CONFIG_SOBEL_FILTER 0
+#define CONFIG_SOBEL_OPENCL_FILTER 0
 #define CONFIG_SPLIT_FILTER 0
 #define CONFIG_SPP_FILTER 0
-#define CONFIG_SRCNN_FILTER 0
+#define CONFIG_SR_FILTER 0
 #define CONFIG_SSIM_FILTER 0
 #define CONFIG_STEREO3D_FILTER 0
 #define CONFIG_STREAMSELECT_FILTER 0
@@ -1853,6 +1861,7 @@
 #define CONFIG_TLUT2_FILTER 0
 #define CONFIG_TMIX_FILTER 0
 #define CONFIG_TONEMAP_FILTER 0
+#define CONFIG_TONEMAP_OPENCL_FILTER 0
 #define CONFIG_TRANSPOSE_FILTER 0
 #define CONFIG_TRIM_FILTER 0
 #define CONFIG_UNPREMULTIPLY_FILTER 0
diff --git a/chromium/config/Chrome/linux/ppc64/libavutil/ffversion.h b/chromium/config/Chrome/linux/ppc64/libavutil/ffversion.h
index e777d8e0b0..24fe6eca1c 100644
--- a/third_party/ffmpeg/chromium/config/Chrome/linux/ppc64/libavutil/ffversion.h
+++ b/third_party/ffmpegchromium/config/Chrome/linux/ppc64/libavutil/ffversion.h
@@ -1,5 +1,5 @@
 /* Automatically generated by version.sh, do not manually edit! */
 #ifndef AVUTIL_FFVERSION_H
 #define AVUTIL_FFVERSION_H
-#define FFMPEG_VERSION "git-2018-09-01-2b977a504b"
+#define FFMPEG_VERSION "git-2018-09-10-cec0eba1da"
 #endif /* AVUTIL_FFVERSION_H */
diff --git a/chromium/config/ChromeOS/linux/ppc64/config.h b/chromium/config/ChromeOS/linux/ppc64/config.h
index 6df1e24acb..1c502d31c1 100644
--- a/third_party/ffmpeg/chromium/config/ChromeOS/linux/ppc64/config.h
+++ b/third_party/ffmpeg/chromium/config/ChromeOS/linux/ppc64/config.h
@@ -417,6 +417,7 @@
 #define CONFIG_OPENSSL 0
 #define CONFIG_LIBTLS 0
 #define CONFIG_GMP 0
+#define CONFIG_LIBLENSFUN 0
 #define CONFIG_LIBOPENCORE_AMRNB 0
 #define CONFIG_LIBOPENCORE_AMRWB 0
 #define CONFIG_LIBVMAF 0
@@ -971,6 +972,7 @@
 #define CONFIG_ATRAC3AL_DECODER 0
 #define CONFIG_ATRAC3P_DECODER 0
 #define CONFIG_ATRAC3PAL_DECODER 0
+#define CONFIG_ATRAC9_DECODER 0
 #define CONFIG_BINKAUDIO_DCT_DECODER 0
 #define CONFIG_BINKAUDIO_RDFT_DECODER 0
 #define CONFIG_BMV_AUDIO_DECODER 0
@@ -1656,6 +1658,7 @@
 #define CONFIG_BLACKFRAME_FILTER 0
 #define CONFIG_BLEND_FILTER 0
 #define CONFIG_BOXBLUR_FILTER 0
+#define CONFIG_BOXBLUR_OPENCL_FILTER 0
 #define CONFIG_BWDIF_FILTER 0
 #define CONFIG_CHROMAKEY_FILTER 0
 #define CONFIG_CIESCOPE_FILTER 0
@@ -1724,6 +1727,7 @@
 #define CONFIG_GBLUR_FILTER 0
 #define CONFIG_GEQ_FILTER 0
 #define CONFIG_GRADFUN_FILTER 0
+#define CONFIG_GREYEDGE_FILTER 0
 #define CONFIG_HALDCLUT_FILTER 0
 #define CONFIG_HFLIP_FILTER 0
 #define CONFIG_HISTEQ_FILTER 0
@@ -1744,6 +1748,7 @@
 #define CONFIG_INTERLEAVE_FILTER 0
 #define CONFIG_KERNDEINT_FILTER 0
 #define CONFIG_LENSCORRECTION_FILTER 0
+#define CONFIG_LENSFUN_FILTER 0
 #define CONFIG_LIBVMAF_FILTER 0
 #define CONFIG_LIMITER_FILTER 0
 #define CONFIG_LOOP_FILTER 0
@@ -1789,6 +1794,7 @@
 #define CONFIG_PP7_FILTER 0
 #define CONFIG_PREMULTIPLY_FILTER 0
 #define CONFIG_PREWITT_FILTER 0
+#define CONFIG_PREWITT_OPENCL_FILTER 0
 #define CONFIG_PROCAMP_VAAPI_FILTER 0
 #define CONFIG_PROGRAM_OPENCL_FILTER 0
 #define CONFIG_PSEUDOCOLOR_FILTER 0
@@ -1805,6 +1811,7 @@
 #define CONFIG_REPEATFIELDS_FILTER 0
 #define CONFIG_REVERSE_FILTER 0
 #define CONFIG_ROBERTS_FILTER 0
+#define CONFIG_ROBERTS_OPENCL_FILTER 0
 #define CONFIG_ROTATE_FILTER 0
 #define CONFIG_SAB_FILTER 0
 #define CONFIG_SCALE_FILTER 0
@@ -1833,9 +1840,10 @@
 #define CONFIG_SIGNATURE_FILTER 0
 #define CONFIG_SMARTBLUR_FILTER 0
 #define CONFIG_SOBEL_FILTER 0
+#define CONFIG_SOBEL_OPENCL_FILTER 0
 #define CONFIG_SPLIT_FILTER 0
 #define CONFIG_SPP_FILTER 0
-#define CONFIG_SRCNN_FILTER 0
+#define CONFIG_SR_FILTER 0
 #define CONFIG_SSIM_FILTER 0
 #define CONFIG_STEREO3D_FILTER 0
 #define CONFIG_STREAMSELECT_FILTER 0
@@ -1853,6 +1861,7 @@
 #define CONFIG_TLUT2_FILTER 0
 #define CONFIG_TMIX_FILTER 0
 #define CONFIG_TONEMAP_FILTER 0
+#define CONFIG_TONEMAP_OPENCL_FILTER 0
 #define CONFIG_TRANSPOSE_FILTER 0
 #define CONFIG_TRIM_FILTER 0
 #define CONFIG_UNPREMULTIPLY_FILTER 0
diff --git a/chromium/config/ChromeOS/linux/ppc64/libavutil/ffversion.h b/chromium/config/ChromeOS/linux/ppc64/libavutil/ffversion.h
index e777d8e0b0..24fe6eca1c 100644
--- a/third_party/ffmpeg/chromium/config/ChromeOS/linux/ppc64/libavutil/ffversion.h
+++ b/third_party/ffmpeg/chromium/config/ChromeOS/linux/ppc64/libavutil/ffversion.h
@@ -1,5 +1,5 @@
 /* Automatically generated by version.sh, do not manually edit! */
 #ifndef AVUTIL_FFVERSION_H
 #define AVUTIL_FFVERSION_H
-#define FFMPEG_VERSION "git-2018-09-01-2b977a504b"
+#define FFMPEG_VERSION "git-2018-09-10-cec0eba1da"
 #endif /* AVUTIL_FFVERSION_H */
diff --git a/chromium/config/Chromium/linux/ppc64/config.h b/chromium/config/Chromium/linux/ppc64/config.h
index a91d916fc9..213427d7ee 100644
--- a/third_party/ffmpeg/chromium/config/Chromium/linux/ppc64/config.h
+++ b/third_party/ffmpeg/chromium/config/Chromium/linux/ppc64/config.h
@@ -417,6 +417,7 @@
 #define CONFIG_OPENSSL 0
 #define CONFIG_LIBTLS 0
 #define CONFIG_GMP 0
+#define CONFIG_LIBLENSFUN 0
 #define CONFIG_LIBOPENCORE_AMRNB 0
 #define CONFIG_LIBOPENCORE_AMRWB 0
 #define CONFIG_LIBVMAF 0
@@ -971,6 +972,7 @@
 #define CONFIG_ATRAC3AL_DECODER 0
 #define CONFIG_ATRAC3P_DECODER 0
 #define CONFIG_ATRAC3PAL_DECODER 0
+#define CONFIG_ATRAC9_DECODER 0
 #define CONFIG_BINKAUDIO_DCT_DECODER 0
 #define CONFIG_BINKAUDIO_RDFT_DECODER 0
 #define CONFIG_BMV_AUDIO_DECODER 0
@@ -1656,6 +1658,7 @@
 #define CONFIG_BLACKFRAME_FILTER 0
 #define CONFIG_BLEND_FILTER 0
 #define CONFIG_BOXBLUR_FILTER 0
+#define CONFIG_BOXBLUR_OPENCL_FILTER 0
 #define CONFIG_BWDIF_FILTER 0
 #define CONFIG_CHROMAKEY_FILTER 0
 #define CONFIG_CIESCOPE_FILTER 0
@@ -1724,6 +1727,7 @@
 #define CONFIG_GBLUR_FILTER 0
 #define CONFIG_GEQ_FILTER 0
 #define CONFIG_GRADFUN_FILTER 0
+#define CONFIG_GREYEDGE_FILTER 0
 #define CONFIG_HALDCLUT_FILTER 0
 #define CONFIG_HFLIP_FILTER 0
 #define CONFIG_HISTEQ_FILTER 0
@@ -1744,6 +1748,7 @@
 #define CONFIG_INTERLEAVE_FILTER 0
 #define CONFIG_KERNDEINT_FILTER 0
 #define CONFIG_LENSCORRECTION_FILTER 0
+#define CONFIG_LENSFUN_FILTER 0
 #define CONFIG_LIBVMAF_FILTER 0
 #define CONFIG_LIMITER_FILTER 0
 #define CONFIG_LOOP_FILTER 0
@@ -1789,6 +1794,7 @@
 #define CONFIG_PP7_FILTER 0
 #define CONFIG_PREMULTIPLY_FILTER 0
 #define CONFIG_PREWITT_FILTER 0
+#define CONFIG_PREWITT_OPENCL_FILTER 0
 #define CONFIG_PROCAMP_VAAPI_FILTER 0
 #define CONFIG_PROGRAM_OPENCL_FILTER 0
 #define CONFIG_PSEUDOCOLOR_FILTER 0
@@ -1805,6 +1811,7 @@
 #define CONFIG_REPEATFIELDS_FILTER 0
 #define CONFIG_REVERSE_FILTER 0
 #define CONFIG_ROBERTS_FILTER 0
+#define CONFIG_ROBERTS_OPENCL_FILTER 0
 #define CONFIG_ROTATE_FILTER 0
 #define CONFIG_SAB_FILTER 0
 #define CONFIG_SCALE_FILTER 0
@@ -1833,9 +1840,10 @@
 #define CONFIG_SIGNATURE_FILTER 0
 #define CONFIG_SMARTBLUR_FILTER 0
 #define CONFIG_SOBEL_FILTER 0
+#define CONFIG_SOBEL_OPENCL_FILTER 0
 #define CONFIG_SPLIT_FILTER 0
 #define CONFIG_SPP_FILTER 0
-#define CONFIG_SRCNN_FILTER 0
+#define CONFIG_SR_FILTER 0
 #define CONFIG_SSIM_FILTER 0
 #define CONFIG_STEREO3D_FILTER 0
 #define CONFIG_STREAMSELECT_FILTER 0
@@ -1853,6 +1861,7 @@
 #define CONFIG_TLUT2_FILTER 0
 #define CONFIG_TMIX_FILTER 0
 #define CONFIG_TONEMAP_FILTER 0
+#define CONFIG_TONEMAP_OPENCL_FILTER 0
 #define CONFIG_TRANSPOSE_FILTER 0
 #define CONFIG_TRIM_FILTER 0
 #define CONFIG_UNPREMULTIPLY_FILTER 0
diff --git a/chromium/config/Chromium/linux/ppc64/libavutil/ffversion.h b/chromium/config/Chromium/linux/ppc64/libavutil/ffversion.h
index e777d8e0b0..24fe6eca1c 100644
--- a/third_party/ffmpeg/chromium/config/Chromium/linux/ppc64/libavutil/ffversion.h
+++ b/third_party/ffmpeg/chromium/config/Chromium/linux/ppc64/libavutil/ffversion.h
@@ -1,5 +1,5 @@
 /* Automatically generated by version.sh, do not manually edit! */
 #ifndef AVUTIL_FFVERSION_H
 #define AVUTIL_FFVERSION_H
-#define FFMPEG_VERSION "git-2018-09-01-2b977a504b"
+#define FFMPEG_VERSION "git-2018-09-10-cec0eba1da"
 #endif /* AVUTIL_FFVERSION_H */
diff --git a/ffmpeg_generated.gni b/ffmpeg_generated.gni
index 8ac532b6c3..9eed0995ff 100644
--- a/third_party/ffmpeg/ffmpeg_generated.gni
+++ b/third_party/ffmpeg/ffmpeg_generated.gni
@@ -292,6 +292,26 @@ if ((is_android && current_cpu == "arm" && arm_use_neon) || (use_linux_config &&
   ]
 }
 
+if (use_linux_config && current_cpu == "ppc64") {
+  ffmpeg_c_sources += [
+    "libavcodec/ppc/autorename_libavcodec_ppc_videodsp.c",
+    "libavcodec/ppc/fft_init.c",
+    "libavcodec/ppc/fft_vsx.c",
+    "libavcodec/ppc/hpeldsp_altivec.c",
+    "libavcodec/ppc/mpegaudiodsp_altivec.c",
+    "libavcodec/ppc/vorbisdsp_altivec.c",
+    "libavcodec/ppc/vp3dsp_altivec.c",
+    "libavcodec/ppc/vp8dsp_altivec.c",
+    "libavutil/ppc/autorename_libavutil_ppc_cpu.c",
+    "libavutil/ppc/float_dsp_altivec.c",
+    "libavutil/ppc/float_dsp_init.c",
+    "libavutil/ppc/float_dsp_vsx.c",
+  ]
+  ffmpeg_gas_sources += [
+    "libavcodec/ppc/fft_altivec.S",
+  ]
+}
+
 if ((is_android && current_cpu == "x64") || (is_mac) || (is_win) || (use_linux_config && current_cpu == "x64") || (use_linux_config && current_cpu == "x86")) {
   ffmpeg_yasm_sources += [
     "libavcodec/x86/dct32.asm",
-- 
2.17.1

